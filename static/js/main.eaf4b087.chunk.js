(this["webpackJsonpgroup-video-calling-app"]=this["webpackJsonpgroup-video-calling-app"]||[]).push([[0],{136:function(e,t,a){},169:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(18),i=a.n(r),o=(a(136),a(9)),s=a(11),l=a.n(s),d=a(25),u=a(19),j=a(64),b=localStorage.getItem("appId"),p=localStorage.getItem("agoraToken"),h=localStorage.getItem("channelName"),m={mode:"rtc",codec:"vp8",appId:b,token:p},O=Object(j.createClient)(m),g=Object(j.createMicrophoneAndCameraTracks)(),v=a(218),x=a(201),f=a(88),S=a(3);function I(e){var t=e.users,a=e.tracks,c=e.fullName,r=Object(n.useState)(12),i=Object(o.a)(r,2),s=i[0],l=i[1];Object(n.useEffect)((function(){l(Math.max(Math.floor(12/(t.length+1)))),console.log("gridSpacing",s)}),[t,a]);var d=(null===t||void 0===t?void 0:t.length)+1;return Object(S.jsxs)(x.a,{container:!0,style:{height:"100%"},spacing:1,children:[Object(S.jsx)(x.a,{item:!0,className:"admin__video__container",sm:1===d?12:2===d?6:3===d?4:4===d?6:d>4?3:null,xs:1===d?12:2===d||3===d||4===d||d>4?6:null,children:Object(S.jsx)(j.AgoraVideoPlayer,{videoTrack:a[1],style:{height:"100%",width:"100%",background:"#454545",borderRadius:"12px",maxHeight:"".concat(d," <= 2 ? 100%: 280px"),position:"relative"},children:Object(S.jsx)(v.a,{style:{position:"absolute",bottom:"1%",left:"2%",zIndex:1,background:"#fafafa",padding:"2px 4px",borderRadius:"4px"},children:Object(S.jsxs)(f.a,{variant:"body2",children:[" ",c," "]})})})}),t.length>0&&t.map((function(e){return e.videoTrack?Object(S.jsx)(x.a,{item:!0,className:"admin__video__container2",sm:1===d?12:2===d?6:3===d?4:4===d?6:d>4?3:null,xs:1===d?12:2===d||3===d||4===d||d>4?6:null,style:{minHeight:"230px",borderRadius:"16px"},children:Object(S.jsx)(j.AgoraVideoPlayer,{videoTrack:e.videoTrack,style:{position:"relative",height:"100%",width:"100%",borderRadius:"12px",background:"#f2f4f6",maxHeight:"".concat(d," <= 2 ? 100%: 280px")},children:Object(S.jsx)(v.a,{style:{position:"absolute",bottom:"1%",left:"2%",zIndex:1,background:"#fafafa",padding:"2px 4px",borderRadius:"4px"},children:Object(S.jsxs)(f.a,{variant:"body2",children:[e.uid," "]})})},e.uid)}):null}))]})}var w=a(24),y=a(222),k=a(209),C=a(210),L=a(110),T=a.n(L),W=a(111),N=a.n(W),P=a(112),_=a.n(P),D=a(113),M=a.n(D),E=a(115),A=a.n(E),R=a(114),q=a.n(R),U=a(221),z=a(206),H=a(172),F=a(207);var J=function(e){var t=e.open,a=e.setOpen,n=(e.handleClose,e.users);return Object(S.jsx)("div",{children:Object(S.jsx)(U.a,{onClose:function(){a(!1)},open:t,style:{position:"absolute",bottom:"20px"},children:Object(S.jsx)(z.a,{children:n.map((function(e){return Object(S.jsx)(H.a,{children:Object(S.jsxs)(F.a,{children:[e.uid," "]})},e.uid)}))})})})};function G(e){var t=O(),a=e.tracks,c=e.setStart,r=e.setInCall,i=e.users,s=Object(n.useState)({video:!0,audio:!0}),d=Object(o.a)(s,2),j=d[0],b=d[1],p=Object(n.useState)(!1),h=Object(o.a)(p,2),m=h[0],g=h[1],f=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("audio"!==t){e.next=6;break}return e.next=3,a[0].setEnabled(!j.audio);case 3:b((function(e){return Object(w.a)(Object(w.a)({},e),{},{audio:!e.audio})})),e.next=10;break;case 6:if("video"!==t){e.next=10;break}return e.next=9,a[1].setEnabled(!j.video);case 9:b((function(e){return Object(w.a)(Object(w.a)({},e),{},{video:!e.video})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.leave();case 2:t.removeAllListeners(),a[0].close(),a[1].close(),c(!1),r(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)(v.a,{style:{background:"#f2f4f6",borderRadius:"8px"},p:2,justifyContent:"center",children:[Object(S.jsxs)(x.a,{container:!0,spacing:2,alignItems:"center",children:[Object(S.jsx)(v.a,{flexGrow:.5}),Object(S.jsx)(x.a,{item:!0,children:Object(S.jsx)(y.a,{title:j.audio?"Mute":"Unmute",children:Object(S.jsx)(k.a,{variant:"contained",color:j.audio?"primary":"secondary",onClick:function(){return f("audio")},children:j.audio?Object(S.jsx)(T.a,{}):Object(S.jsx)(N.a,{})})})}),Object(S.jsx)(x.a,{item:!0,children:Object(S.jsx)(y.a,{title:j.video?"Hide":"Show",children:Object(S.jsx)(k.a,{variant:"contained",color:j.video?"primary":"secondary",onClick:function(){return f("video")},children:j.video?Object(S.jsx)(_.a,{}):Object(S.jsx)(M.a,{})})})}),Object(S.jsx)(x.a,{item:!0,children:Object(S.jsx)(k.a,{variant:"outlined",color:"secondary",onClick:function(){I(),window.location.href="/group-video-calling-app/welcome"},children:Object(S.jsx)(q.a,{})})}),Object(S.jsx)(v.a,{pl:3}),Object(S.jsx)(x.a,{item:!0,children:Object(S.jsx)(k.a,{onClick:function(){return g(!0)},children:Object(S.jsx)(C.a,{badgeContent:(null===i||void 0===i?void 0:i.length)+1,children:Object(S.jsx)(A.a,{})})})}),Object(S.jsx)(v.a,{flexGrow:.3})]}),Object(S.jsx)(J,{onClose:function(){return g(!0)},open:m,setOpen:g,users:i})]})}var V=a(16),B=a(211),K=a(204),Q=a(223),X=a(214),Y=a(225),Z=a(219),$=a(215),ee=a(216),te=a(35),ae=a(38),ne={PaperProps:{style:{maxHeight:224,width:250}}},ce={name:"",mobile:"",stateId:null,districtID:null,password:"",confirmPassword:""};var re=function(){var e=Object(n.useState)(ce),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),i=Object(o.a)(r,2),s=(i[0],i[1],Object(n.useState)(!1)),l=Object(o.a)(s,2),d=(l[0],l[1]),u=Object(n.useState)(null),j=Object(o.a)(u,2),b=(j[0],j[1],Object(n.useState)([])),p=Object(o.a)(b,2),h=p[0],m=p[1],O=Object(n.useState)([]),g=Object(o.a)(O,2),I=g[0],y=g[1];Object(n.useEffect)((function(){te.a.get("https://iplfarmersamvad.com/CMSWSIPL/ws/stateList/json").then((function(e){var t;m(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.StateList)})).catch((function(e){return console.log(e)})),a.stateId&&te.a.get("https://iplfarmersamvad.com/CMSWSIPL/ws/districtList/json/".concat(a.stateId)).then((function(e){var t;y(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.districtList)})).catch((function(e){return console.log("Something Went wrong!!!",e)}))}),[a.stateId]);var k=function(e){var t=e.target,n=t.name,r=t.value;c(Object(w.a)(Object(w.a)({},a),{},Object(V.a)({},n,r)))};return console.log("value",a),Object(S.jsx)(B.a,{maxWidth:"xs",children:Object(S.jsx)(v.a,{pt:8,children:Object(S.jsxs)(v.a,{className:"",component:K.a,p:2,children:[Object(S.jsx)(v.a,{pb:2,children:Object(S.jsx)(f.a,{component:"h1",variant:"h5",children:"Sign Up"})}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),te.a.post("https://iplfarmersamvad.com/CMSWSIPL/ws/volunteer/json/volunteerSave",a).then((function(e){"mobile_exist"===e.data.msg?d(!0):d(!1),"mobile_exist"===e.data.msg&&alert("Mobile Number already exits"),"success"===e.data.msg&&alert("Registered Successfully")})).catch((function(e){console.error("There was an error!",e)}))},children:[Object(S.jsx)(Q.a,{variant:"outlined",placeholder:"Full Name",margin:"dense",required:!0,fullWidth:!0,name:"name",label:"Full Name",id:"name",autoComplete:"current-password",value:a.name,onChange:k}),Object(S.jsx)(Q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,name:"mobile",placeholder:"888 999 2128",label:"Mobile",type:"number",id:"mobile",value:a.mobile,onChange:k}),Object(S.jsxs)(X.a,{variant:"outlined",margin:"dense",fullWidth:!0,children:[Object(S.jsx)(Y.a,{id:"select__state",children:"State(Optional)"}),Object(S.jsx)(Z.a,{labelId:"stateList",id:"stateList_id",value:a.stateId,name:"stateId",onChange:k,label:"State(Optional)",MenuProps:ne,children:h.map((function(e){return Object(S.jsxs)($.a,{value:e.stateID,children:[e.stateName," "]},e.stateID)}))})]}),Object(S.jsxs)(X.a,{variant:"outlined",margin:"dense",fullWidth:!0,children:[Object(S.jsx)(Y.a,{id:"select__state",children:"District(optional)"}),Object(S.jsx)(Z.a,{labelId:"District(optional)",id:"District(optional)",value:a.districtID,name:"districtID",onChange:k,label:"District(optional)",MenuProps:ne,children:I.map((function(e){return Object(S.jsx)($.a,{value:e.districtID,children:e.districtName},e.districtID)}))})]}),Object(S.jsx)(Q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,name:"password",label:"Password",placeholder:"*********",id:"password",value:a.password,type:"password",onChange:k}),Object(S.jsx)(Q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",placeholder:"*********",id:"confirmPassword",type:"password",value:a.confirmPassword,onChange:k}),Object(S.jsx)(ee.a,{fullWidth:!0,disabled:0===a.name.length||a.mobile.length<10||0===a.password.length||0===a.confirmPassword.length,style:{marginTop:"24px",textTransform:"capitalize"},variant:"contained",color:"primary",type:"submit",children:"SignUp"}),Object(S.jsx)(v.a,{pt:1,children:Object(S.jsxs)(f.a,{children:["Already have an account ?"," ",Object(S.jsx)("span",{children:Object(S.jsx)(ae.b,{to:"/group-video-calling-app/login",children:"Login"})})]})}),Object(S.jsx)(x.a,{container:!0,children:Object(S.jsx)(x.a,{item:!0,xs:!0})})]})]})})})};function ie(e){var t=e.fullName,a=e.setInCall,c=Object(n.useState)([]),r=Object(o.a)(c,2),i=r[0],s=r[1],j=Object(n.useState)(!1),b=Object(o.a)(j,2),p=b[0],f=b[1],w=O(),y=g(),k=y.ready,C=y.tracks;return Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.on("user-published",function(){var e=Object(u.a)(l.a.mark((function e(t,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.subscribe(t,a);case 2:"video"===a&&s((function(e){return[].concat(Object(d.a)(e),[t])})),"audio"===a&&t.audioTrack.play();case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),w.on("user-unpublished",(function(e,t){"audio"===t&&e.audioTrack&&e.audioTrack.stop(),"video"===t&&s((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),w.on("user-left",(function(e){s((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),e.prev=3,e.next=6,w.join(m.appId,t,m.token,0);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("error");case 11:if(!C){e.next=14;break}return e.next=14,w.publish([C[0],C[1]]);case 14:f(!0);case 15:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,a){return e.apply(this,arguments)}}();if(k&&C)try{e(h,t)}catch(a){console.log(a)}}),[h,w,k,C]),console.log("users",i),Object(S.jsx)(v.a,{style:{height:"100vh",background:"#0000"},children:Object(S.jsxs)(x.a,{container:!0,direction:"column",style:{height:"100vh",background:"#0000",padding:"16px"},children:[Object(S.jsx)(x.a,{item:!0,style:{height:"83vh",overflow:"hide"},children:p&&C&&Object(S.jsx)(I,{tracks:C,users:i,fullName:t})}),Object(S.jsx)(x.a,{item:!0,style:{height:"10%"},children:k&&C&&Object(S.jsx)(G,{tracks:C,setStart:f,setInCall:a,users:i})})]})})}var oe=a(7),se=te.a.create({baseURL:"https://iplfarmersamvad.com/CMSWSIPL/ws"}),le={mobile:"",password:""};var de=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(le),r=Object(o.a)(c,2),i=r[0],s=r[1],d=Object(n.useState)(),j=Object(o.a)(d,2);j[0],j[1],Object(n.useEffect)((function(){localStorage.getItem("isLogin")&&oe.a}),[]);var b=function(e){var t=e.target,a=t.name,n=t.value;s(Object(w.a)(Object(w.a)({},i),{},Object(V.a)({},a,n)))};console.log("value",i);var p=function(){var e=Object(u.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,se.post("/userAuth/agoratoken",{userId:localStorage.getItem("response_userId"),channelName:"",eventId:12}).then((function(e){var t,a,n,c,r;localStorage.setItem("agoraToken",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.agoraToken),localStorage.setItem("appId",null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.appId),localStorage.setItem("channelName",null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.channelName),localStorage.setItem(" eventId",null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.eventId),localStorage.setItem("role",null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.role),console.log("getUserDetails",e.data)}));case 2:a(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){}),[localStorage.getItem("isLogin"),localStorage.getItem("agoraToken")]),Object(S.jsxs)(S.Fragment,{children:[localStorage.getItem("isLogin")&&localStorage.getItem("agoraToken")&&Object(S.jsx)(oe.a,{to:"/group-video-calling-app",replace:!0}),Object(S.jsx)(B.a,{maxWidth:"xs",children:Object(S.jsx)(v.a,{pt:8,children:Object(S.jsxs)(v.a,{className:"",component:K.a,p:2,children:[Object(S.jsx)(v.a,{pb:2,children:Object(S.jsx)(f.a,{component:"h1",variant:"h5",children:"Login"})}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),te.a.get("https://iplfarmersamvad.com/CMSWSIPL/ws/userAuth/json/".concat(i.mobile,"/").concat(i.password)).then((function(e){var t,a;localStorage.setItem("isLogin",!0),localStorage.setItem("response_userId",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.response_userId),!1===(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.valid)&&alert("Invalid credentails!!")})).catch((function(e){console.error("There was an error!",e)})),p(),a(!0)},children:[Object(S.jsx)(Q.a,{variant:"outlined",margin:"dense",placeholder:"888 999 6612",required:!0,fullWidth:!0,name:"mobile",label:"Mobile",type:"number",id:"mobile",value:i.mobile,onChange:b}),Object(S.jsx)(Q.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,placeholder:"*******",name:"password",label:"Password",id:"password",value:i.password,type:"password",onChange:b}),Object(S.jsx)(ee.a,{fullWidth:!0,disabled:i.mobile.length<10||0===i.password.length,style:{marginTop:"24px",textTransform:"capitalize"},variant:"contained",color:"primary",type:"submit",children:"Login"}),Object(S.jsx)(v.a,{pt:1,children:Object(S.jsxs)(f.a,{children:["Don't have an account ?"," ",Object(S.jsx)("span",{children:Object(S.jsx)(ae.b,{to:"/group-video-calling-app/signup",children:"Sign Up"})})]})})]})]})})})]})},ue={mobile:"",password:""};var je=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(ue),r=Object(o.a)(c,2),i=r[0];return r[1],Object(n.useEffect)((function(){localStorage.getItem("isLogin")&&oe.a}),[]),console.log("value",i),Object(S.jsx)(B.a,{maxWidth:"xs",children:Object(S.jsx)(v.a,{pt:8,children:Object(S.jsxs)(v.a,{className:"",component:K.a,p:2,children:[Object(S.jsx)(v.a,{pb:2,children:Object(S.jsx)(f.a,{component:"h1",variant:"h5",children:"Thank you for joining!!!"})}),Object(S.jsx)(ee.a,{component:ae.b,to:"/group-video-calling-app",fullWidth:!0,style:{marginTop:"24px",textTransform:"capitalize"},variant:"contained",color:"primary",onClick:function(){a(!0)},children:"Joining Again"})]})})})};var be=function(){var e=Object(n.useState)(!0),t=Object(o.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(""),r=Object(o.a)(c,2),i=r[0],s=(r[1],Object(n.useState)(!1)),l=Object(o.a)(s,2),d=l[0],u=l[1];return Object(n.useEffect)((function(){localStorage.getItem("isLogin");u(!0)}),[]),Object(S.jsx)(ae.a,{children:Object(S.jsxs)(oe.d,{children:[Object(S.jsx)(oe.b,{path:"*",element:Object(S.jsx)(oe.a,{to:d?"/group-video-calling-app":"/group-video-calling-app/signup",replace:!0})}),Object(S.jsx)(oe.b,{path:"/group-video-calling-app",element:Object(S.jsx)(ie,{setInCall:a,fullName:i})}),Object(S.jsx)(oe.b,{path:"/group-video-calling-app/signup",element:Object(S.jsx)(re,{})}),Object(S.jsx)(oe.b,{path:"group-video-calling-app/login",element:Object(S.jsx)(de,{})}),Object(S.jsx)(oe.b,{path:"group-video-calling-app/welcome",element:Object(S.jsx)(je,{})}),Object(S.jsx)(oe.b,{path:"/group-video-calling-app",element:Object(S.jsx)(ie,{setInCall:a,fullName:i})})]})})};i.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(be,{})}),document.getElementById("root"))}},[[169,1,2]]]);
//# sourceMappingURL=main.eaf4b087.chunk.js.map