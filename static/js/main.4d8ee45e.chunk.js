(this["webpackJsonpgroup-video-calling-app"]=this["webpackJsonpgroup-video-calling-app"]||[]).push([[0],{122:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(10),i=n.n(c),o=(n(92),n(16)),s=n(157),l=n(18),u=n.n(l),d=n(75),j=n(36),b=n(37),h="deom-1",x={mode:"rtc",codec:"vp8",appId:"002d67ae068040be96b28ec17b115ea8",token:"007eJxTYPBav+zTkohJkdqTLrLNlfuhbMX6YcHOns96EZrJC8UzKtgUGAwMjFLMzBNTDcwsDEwMklItzZKMLFKTDc2TDA1NUxMt7i1JSW4IZGT4comXhZEBAkF8NoaU1PxcXUMGBgBPPh8v"},p=Object(b.createClient)(x),f=Object(b.createMicrophoneAndCameraTracks)(),O=n(160),v=n(148),m=n(151),g=n(4);function k(e){var t=e.users,n=e.tracks,r=e.fullName,c=Object(a.useState)(12),i=Object(o.a)(c,2),s=i[0],l=i[1];Object(a.useEffect)((function(){l(Math.max(Math.floor(12/(t.length+1)))),console.log("gridSpacing",s)}),[t,n]),console.log("USERS---------------------------",t);var u=(null===t||void 0===t?void 0:t.length)+1;return Object(g.jsxs)(v.a,{container:!0,style:{height:"100%"},spacing:1,children:[Object(g.jsx)(v.a,{item:!0,sm:1===u?12:2===u?6:3===u?4:4===u?6:u>4?3:null,xs:1===u?12:2===u||3===u||4===u||u>4?6:null,children:Object(g.jsx)(b.AgoraVideoPlayer,{videoTrack:n[1],style:{height:"100%",width:"100%",maxHeight:"".concat(u," <= 2 ? 100%: 280px"),position:"relative"},children:Object(g.jsx)(O.a,{style:{position:"absolute",bottom:"1%",left:"2%",zIndex:1,background:"#fafafa",padding:"2px 4px",borderRadius:"4px"},children:Object(g.jsxs)(m.a,{variant:"body2",children:[" ",r," "]})})})}),t.length>0&&t.map((function(e){return e.videoTrack?Object(g.jsx)(v.a,{item:!0,sm:1===u?12:2===u?6:3===u?4:4===u?6:u>4?3:null,xs:1===u?12:2===u||3===u||4===u||u>4?6:null,style:{minHeight:"230px",borderRadius:"16px"},children:Object(g.jsx)(b.AgoraVideoPlayer,{videoTrack:e.videoTrack,style:{position:"relative",height:"100%",width:"100%",borderRadius:"16px",background:"#f2f4f6",maxHeight:"".concat(u," <= 2 ? 100%: 280px")},children:Object(g.jsx)(O.a,{style:{position:"absolute",bottom:"1%",left:"2%",zIndex:1,background:"#fafafa",padding:"2px 4px",borderRadius:"4px"},children:Object(g.jsxs)(m.a,{variant:"body2",children:[e.uid," "]})})},e.uid)}):null}))]})}var y=n(44),w=n(162),C=n(153),S=n(154),T=n(69),M=n.n(T),N=n(70),I=n.n(N),E=n(71),A=n.n(E),J=n(72),U=n.n(J),z=n(74),B=n.n(z),P=n(73),R=n.n(P);function G(e){var t=p(),n=e.tracks,r=e.setStart,c=e.setInCall,i=e.users,s=Object(a.useState)({video:!0,audio:!0}),l=Object(o.a)(s,2),d=l[0],b=l[1],h=function(){var e=Object(j.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("audio"!==t){e.next=6;break}return e.next=3,n[0].setEnabled(!d.audio);case 3:b((function(e){return Object(y.a)(Object(y.a)({},e),{},{audio:!e.audio})})),e.next=10;break;case 6:if("video"!==t){e.next=10;break}return e.next=9,n[1].setEnabled(!d.video);case 9:b((function(e){return Object(y.a)(Object(y.a)({},e),{},{video:!e.video})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.leave();case 2:t.removeAllListeners(),n[0].close(),n[1].close(),r(!1),c(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(g.jsx)(O.a,{style:{background:"#f2f4f6",borderRadius:"8px"},p:2,justifyContent:"center",children:Object(g.jsxs)(v.a,{container:!0,spacing:2,alignItems:"center",children:[Object(g.jsx)(O.a,{flexGrow:.5}),Object(g.jsx)(v.a,{item:!0,children:Object(g.jsx)(w.a,{title:d.audio?"Mute":"Unmute",children:Object(g.jsx)(C.a,{variant:"contained",color:d.audio?"primary":"secondary",onClick:function(){return h("audio")},children:d.audio?Object(g.jsx)(M.a,{}):Object(g.jsx)(I.a,{})})})}),Object(g.jsx)(v.a,{item:!0,children:Object(g.jsx)(w.a,{title:d.video?"Hide":"Show",children:Object(g.jsx)(C.a,{variant:"contained",color:d.video?"primary":"secondary",onClick:function(){return h("video")},children:d.video?Object(g.jsx)(A.a,{}):Object(g.jsx)(U.a,{})})})}),Object(g.jsx)(v.a,{item:!0,children:Object(g.jsx)(C.a,{variant:"outlined",color:"secondary",onClick:function(){return x()},children:Object(g.jsx)(R.a,{})})}),Object(g.jsx)(O.a,{pl:3}),Object(g.jsx)(v.a,{item:!0,children:Object(g.jsx)(C.a,{children:Object(g.jsx)(S.a,{badgeContent:(null===i||void 0===i?void 0:i.length)+1,children:Object(g.jsx)(B.a,{})})})}),Object(g.jsx)(O.a,{flexGrow:.3})]})})}function H(e){var t=e.fullName,n=e.setInCall,r=Object(a.useState)([]),c=Object(o.a)(r,2),i=c[0],s=c[1],l=Object(a.useState)(!1),b=Object(o.a)(l,2),m=b[0],y=b[1],w=p(),C=f(),S=C.ready,T=C.tracks;return Object(a.useEffect)((function(){var e=function(){var e=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.on("user-published",function(){var e=Object(j.a)(u.a.mark((function e(t,n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.subscribe(t,n);case 2:"video"===n&&s((function(e){return[].concat(Object(d.a)(e),[t])})),"audio"===n&&t.audioTrack.play();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),w.on("user-unpublished",(function(e,t){"audio"===t&&e.audioTrack&&e.audioTrack.stop(),"video"===t&&s((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),w.on("user-left",(function(e){s((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),e.prev=3,e.next=6,w.join(x.appId,t,x.token,0);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("error");case 11:if(!T){e.next=14;break}return e.next=14,w.publish([T[0],T[1]]);case 14:y(!0);case 15:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,n){return e.apply(this,arguments)}}();if(S&&T)try{e(h,t)}catch(n){console.log(n)}}),[h,w,S,T]),console.log("users",i),Object(g.jsx)(O.a,{style:{height:"100vh",background:"#0000"},children:Object(g.jsxs)(v.a,{container:!0,direction:"column",style:{height:"100vh",background:"#0000",padding:"16px"},children:[Object(g.jsx)(v.a,{item:!0,style:{height:"83vh",overflow:"hide"},children:m&&T&&Object(g.jsx)(k,{tracks:T,users:i,fullName:t})}),Object(g.jsx)(v.a,{item:!0,style:{height:"10%"},children:S&&T&&Object(g.jsx)(G,{tracks:T,setStart:y,setInCall:n,users:i})})]})})}var L=n(155),W=n(156),D=n(158);var F=function(){var e=Object(a.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(""),i=Object(o.a)(c,2),l=i[0],u=i[1],d=Object(a.useState)(""),j=Object(o.a)(d,2),b=j[0],h=j[1],x=Object(a.useState)(""),p=Object(o.a)(x,2),f=p[0],k=p[1];return console.log(l,b,f),Object(g.jsx)(O.a,{className:"App",style:{height:"100vh",background:"#000"},children:n?Object(g.jsx)(H,{setInCall:r,fullName:l}):Object(g.jsx)(L.a,{component:"main",maxWidth:"xs",children:Object(g.jsx)(O.a,{pt:8,children:Object(g.jsxs)(O.a,{className:"",component:W.a,p:2,children:[Object(g.jsx)(O.a,{pb:2,children:Object(g.jsx)(m.a,{component:"h1",variant:"h5",children:"Virtual Call"})}),Object(g.jsxs)("form",{children:[Object(g.jsx)(D.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,name:"fullName",label:"Full Name",id:"fullName",autoComplete:"current-password",value:l,onChange:function(e){return u(e.target.value)}}),Object(g.jsx)(D.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,name:"Mobile",label:"Mobile",type:"number",id:"Mobile",value:b,onChange:function(e){return h(e.target.value)}}),Object(g.jsx)(D.a,{variant:"outlined",margin:"dense",fullWidth:!0,name:"email",label:"Email(Optional)",type:"email",id:"email",value:f,onChange:function(e){return k(e.target.value)}}),Object(g.jsx)(v.a,{container:!0,children:Object(g.jsx)(v.a,{item:!0,xs:!0,children:Object(g.jsx)(s.a,{disabled:0===l.length||0===b.length,style:{marginTop:"24px"},variant:"contained",color:"primary",onClick:function(){r(!0)},children:"Join Call"})})})]})]})})})})};i.a.render(Object(g.jsx)(r.a.StrictMode,{children:Object(g.jsx)(F,{})}),document.getElementById("root"))},92:function(e,t,n){}},[[122,1,2]]]);
//# sourceMappingURL=main.4d8ee45e.chunk.js.map