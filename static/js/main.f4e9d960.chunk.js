(this["webpackJsonpgroup-video-calling-app"]=this["webpackJsonpgroup-video-calling-app"]||[]).push([[0],{107:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(11),i=n.n(c),o=(n(77),n(17)),s=n(124),u=n(15),d=n.n(u),l=n(64),j=n(28),b=n(29),x={mode:"rtc",codec:"vp8",appId:"002d67ae068040be96b28ec17b115ea8",token:"007eJxTYBAVfhIw2ViuxvnLZGFth/u3/mgzZVXcLRfebhL60oi1skyBwcDAKMXMPDHVwMzCwMQgKdXSLMnIIjXZ0DzJ0NA0NdFiT0RyckMgI8OSDCcmRgYIBPHZGFJSc/N1DRkYAL0/HR4="},p=Object(b.createClient)(x),h=Object(b.createMicrophoneAndCameraTracks)(),f="demo-1",O=n(126),v=n(121),g=n(122),k=n(2);function m(e){var t=e.users,n=e.tracks,a=Object(r.useState)(12),c=Object(o.a)(a,2),i=c[0],s=c[1];return Object(r.useEffect)((function(){s(Math.max(Math.floor(12/(t.length+1)),4)),console.log("gridSpacing",i)}),[t,n]),console.log("users, tracks",t,n),Object(k.jsxs)(v.a,{container:!0,style:{height:"100%"},spacing:1,children:[Object(k.jsx)(v.a,{item:!0,xs:6,lg:3,sm:i,children:Object(k.jsx)(b.AgoraVideoPlayer,{videoTrack:n[1],style:{height:"100%",width:"100%",position:"relative"},children:Object(k.jsx)(O.a,{style:{position:"absolute",bottom:"1%",left:"2%",zIndex:1,background:"#fafafa",padding:"2px 4px",borderRadius:"4px"},children:Object(k.jsx)(g.a,{variant:"body2",children:"Vikash Kumar"})})})}),t.length>0&&t.map((function(e){return e.videoTrack?Object(k.jsx)(v.a,{item:!0,xs:6,lg:3,sm:i,style:{minHeight:"230px",borderRadius:"16px"},children:Object(k.jsx)(b.AgoraVideoPlayer,{videoTrack:e.videoTrack,style:{position:"relative",height:"100%",width:"100%",borderRadius:"16px",background:"#f2f4f6"},children:Object(k.jsx)(O.a,{style:{position:"absolute",bottom:"1%",left:"2%",zIndex:1,background:"#fafafa",padding:"2px 4px",borderRadius:"4px"},children:Object(k.jsxs)(g.a,{variant:"body2",children:[e.uid," "]})})},e.uid)}):null}))]})}var y=n(36),w=n(127),I=n(123),C=n(58),S=n.n(C),R=n(59),M=n.n(R),T=n(60),A=n.n(T),V=n(61),J=n.n(V),L=n(63),z=n.n(L),D=n(62),E=n.n(D);function H(e){var t=p(),n=e.tracks,a=e.setStart,c=e.setInCall,i=Object(r.useState)({video:!0,audio:!0}),s=Object(o.a)(i,2),u=s[0],l=s[1],b=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("audio"!==t){e.next=6;break}return e.next=3,n[0].setEnabled(!u.audio);case 3:l((function(e){return Object(y.a)(Object(y.a)({},e),{},{audio:!e.audio})})),e.next=10;break;case 6:if("video"!==t){e.next=10;break}return e.next=9,n[1].setEnabled(!u.video);case 9:l((function(e){return Object(y.a)(Object(y.a)({},e),{},{video:!e.video})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(j.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.leave();case 2:t.removeAllListeners(),n[0].close(),n[1].close(),a(!1),c(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsx)(O.a,{style:{background:"#f2f4f6",borderRadius:"8px"},p:2,justifyContent:"center",children:Object(k.jsxs)(v.a,{container:!0,spacing:2,alignItems:"center",children:[Object(k.jsx)(O.a,{flexGrow:.5}),Object(k.jsx)(v.a,{item:!0,children:Object(k.jsx)(w.a,{title:u.audio?"Mute":"Unmute",children:Object(k.jsx)(I.a,{variant:"contained",color:u.audio?"primary":"secondary",onClick:function(){return b("audio")},children:u.audio?Object(k.jsx)(S.a,{}):Object(k.jsx)(M.a,{})})})}),Object(k.jsx)(v.a,{item:!0,children:Object(k.jsx)(w.a,{title:u.video?"Hide":"Show",children:Object(k.jsx)(I.a,{variant:"contained",color:u.video?"primary":"secondary",onClick:function(){return b("video")},children:u.video?Object(k.jsx)(A.a,{}):Object(k.jsx)(J.a,{})})})}),Object(k.jsx)(v.a,{item:!0,children:Object(k.jsx)(I.a,{variant:"outlined",color:"secondary",onClick:function(){return x()},children:Object(k.jsx)(E.a,{})})}),Object(k.jsx)(O.a,{pl:3}),Object(k.jsx)(v.a,{item:!0,children:Object(k.jsx)(w.a,{title:"Participent",children:Object(k.jsx)(I.a,{children:Object(k.jsx)(z.a,{})})})}),Object(k.jsx)(O.a,{flexGrow:.3})]})})}function P(e){var t=e.setInCall,n=Object(r.useState)([]),a=Object(o.a)(n,2),c=a[0],i=a[1],s=Object(r.useState)(!1),u=Object(o.a)(s,2),b=u[0],g=u[1],y=p(),w=h(),I=w.ready,C=w.tracks;return Object(r.useEffect)((function(){var e=function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.on("user-published",function(){var e=Object(j.a)(d.a.mark((function e(t,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.subscribe(t,n);case 2:"video"===n&&i((function(e){return[].concat(Object(l.a)(e),[t])})),"audio"===n&&t.audioTrack.play();case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),y.on("user-unpublished",(function(e,t){"audio"===t&&e.audioTrack&&e.audioTrack.stop(),"video"===t&&i((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),y.on("user-left",(function(e){i((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),e.prev=3,e.next=6,y.join(x.appId,t,x.token,null);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("error");case 11:if(!C){e.next=14;break}return e.next=14,y.publish([C[0],C[1]]);case 14:g(!0);case 15:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}();if(I&&C)try{e(f)}catch(t){console.log(t)}}),[f,y,I,C]),Object(k.jsx)(O.a,{style:{height:"95%",background:"#454545",borderRadius:"8px"},children:Object(k.jsxs)(v.a,{container:!0,direction:"column",style:{height:"95%",background:"#454545",padding:"16px",borderRadius:"8px"},children:[Object(k.jsx)(v.a,{item:!0,style:{height:"90%",overflow:"hide"},children:b&&C&&Object(k.jsx)(m,{tracks:C,users:c})}),Object(k.jsx)(v.a,{item:!0,style:{height:"5%"},children:I&&C&&Object(k.jsx)(H,{tracks:C,setStart:g,setInCall:t})})]})})}var B=function(){var e=Object(r.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(k.jsx)("div",{className:"App",style:{height:"100%"},children:n?Object(k.jsx)(P,{setInCall:a}):Object(k.jsx)(s.a,{variant:"contained",color:"primary",onClick:function(){return a(!0)},children:"Join Call"})})};i.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(B,{})}),document.getElementById("root"))},77:function(e,t,n){}},[[107,1,2]]]);
//# sourceMappingURL=main.f4e9d960.chunk.js.map