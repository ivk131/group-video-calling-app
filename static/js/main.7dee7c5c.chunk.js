(this["webpackJsonpgroup-video-calling-app"]=this["webpackJsonpgroup-video-calling-app"]||[]).push([[0],{147:function(e,t,a){},180:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(25),o=a.n(r),i=(a(147),a(26)),s=a(12),l=a(10),d=a.n(l),u=a(17),j=a(71),b=localStorage.getItem("appId"),p=localStorage.getItem("agoraToken"),h=localStorage.getItem("channelName"),m={mode:"rtc",codec:"vp8",appId:b,token:p},O=Object(j.createClient)(m),v=Object(j.createMicrophoneAndCameraTracks)(),f=a(229),g=a(212),x=a(97),S=a(3);function I(e){var t=e.users,a=e.tracks,c=(e.fullName,e.userName),r=Object(n.useState)(12),o=Object(s.a)(r,2),i=o[0],l=o[1];Object(n.useEffect)((function(){l(Math.max(Math.floor(12/(t.length+1)))),console.log("gridSpacing",i)}),[t,a]);var d=(null===t||void 0===t?void 0:t.length)+1;return Object(S.jsxs)(g.a,{container:!0,style:{height:"100%"},spacing:1,children:[Object(S.jsx)(g.a,{item:!0,className:"admin__video__container",sm:1===d?12:2===d?6:3===d?4:4===d?6:d>4?3:null,xs:1===d?12:2===d||3===d||4===d||d>4?6:null,children:Object(S.jsx)(j.AgoraVideoPlayer,{videoTrack:a[1],style:{height:"100%",width:"100%",background:"#454545",borderRadius:"12px",maxHeight:"".concat(d," <= 2 ? 100%: 280px"),position:"relative"},children:Object(S.jsx)(f.a,{style:{position:"absolute",bottom:"1%",left:"2%",zIndex:1,background:"#fafafa",padding:"2px 4px",borderRadius:"4px"},children:Object(S.jsxs)(x.a,{variant:"body2",children:[" ",c," "]})})})}),t.length>0&&t.map((function(e){return e.videoTrack?Object(S.jsx)(g.a,{item:!0,className:"admin__video__container2",sm:1===d?12:2===d?6:3===d?4:4===d?6:d>4?3:null,xs:1===d?12:2===d||3===d||4===d||d>4?6:null,style:{minHeight:"230px",borderRadius:"16px"},children:Object(S.jsx)(j.AgoraVideoPlayer,{videoTrack:e.videoTrack,style:{position:"relative",height:"100%",width:"100%",borderRadius:"12px",background:"#f2f4f6",maxHeight:"".concat(d," <= 2 ? 100%: 280px")},children:Object(S.jsx)(f.a,{style:{position:"absolute",bottom:"1%",left:"2%",zIndex:1,background:"#fafafa",padding:"2px 4px",borderRadius:"4px"},children:Object(S.jsxs)(x.a,{variant:"body2",children:[e.uid," "]})})},e.uid)}):null}))]})}var w=a(29),y=a(233),k=a(220),C=a(221),P=a(118),T=a.n(P),L=a(119),N=a.n(L),W=a(120),_=a.n(W),D=a(121),M=a.n(D),E=a(125),A=a.n(E),R=a(124),U=a.n(R),q=a(232),z=a(217),F=a(183),H=a(218);var B=function(e){var t=e.open,a=e.setOpen,n=(e.handleClose,e.users);return Object(S.jsx)("div",{children:Object(S.jsx)(q.a,{onClose:function(){a(!1)},open:t,style:{position:"absolute",bottom:"20px"},children:Object(S.jsx)(z.a,{children:n.map((function(e){return Object(S.jsx)(F.a,{children:Object(S.jsxs)(H.a,{children:[e.uid," "]})},e.uid)}))})})})},G=a(122),J=a.n(G),K=a(123),V=a.n(K);function Q(e){var t=O(),a=e.tracks,c=e.setStart,r=e.setInCall,o=e.users,i=Object(n.useState)({video:!0,audio:!0}),l=Object(s.a)(i,2),j=l[0],b=l[1],p=Object(n.useState)(!1),h=Object(s.a)(p,2),m=h[0],v=h[1],x=Object(n.useState)(!1),I=Object(s.a)(x,2),P=I[0],L=(I[1],function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("audio"!==t){e.next=6;break}return e.next=3,a[0].setEnabled(!j.audio);case 3:b((function(e){return Object(w.a)(Object(w.a)({},e),{},{audio:!e.audio})})),e.next=10;break;case 6:if("video"!==t){e.next=10;break}return e.next=9,a[1].setEnabled(!j.video);case 9:b((function(e){return Object(w.a)(Object(w.a)({},e),{},{video:!e.video})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),W=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.leave();case 2:t.removeAllListeners(),a[0].close(),a[1].close(),c(!1),r(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)(f.a,{style:{background:"#f2f4f6",borderRadius:"8px"},p:2,justifyContent:"center",children:[Object(S.jsxs)(g.a,{container:!0,spacing:2,alignItems:"center",children:[Object(S.jsx)(f.a,{flexGrow:.5}),Object(S.jsx)(g.a,{item:!0,children:Object(S.jsx)(y.a,{title:j.audio?"Mute":"Unmute",children:Object(S.jsx)(k.a,{variant:"contained",color:j.audio?"primary":"secondary",onClick:function(){return L("audio")},children:j.audio?Object(S.jsx)(T.a,{}):Object(S.jsx)(N.a,{})})})}),Object(S.jsx)(g.a,{item:!0,children:Object(S.jsx)(y.a,{title:j.video?"Hide":"Show",children:Object(S.jsx)(k.a,{variant:"contained",color:j.video?"primary":"secondary",onClick:function(){return L("video")},children:j.video?Object(S.jsx)(_.a,{}):Object(S.jsx)(M.a,{})})})}),Object(S.jsx)(g.a,{item:!0,children:Object(S.jsx)(y.a,{title:j.video?"Screen Share":"Stop share",children:Object(S.jsx)(k.a,{variant:"contained",children:P?Object(S.jsx)(J.a,{}):Object(S.jsx)(V.a,{})})})}),Object(S.jsx)(g.a,{item:!0,children:Object(S.jsx)(k.a,{variant:"outlined",color:"secondary",onClick:function(){W(),window.location.href="/group-video-calling-app/welcome"},children:Object(S.jsx)(U.a,{})})}),Object(S.jsx)(f.a,{pl:3}),Object(S.jsx)(g.a,{item:!0,children:Object(S.jsx)(k.a,{onClick:function(){return v(!0)},children:Object(S.jsx)(C.a,{badgeContent:(null===o||void 0===o?void 0:o.length)+1,children:Object(S.jsx)(A.a,{})})})}),Object(S.jsx)(f.a,{flexGrow:.3})]}),Object(S.jsx)(B,{onClose:function(){return v(!0)},open:m,setOpen:v,users:o})]})}var X=a(11),Y=a(222),Z=a(215),$=a(234),ee=a(225),te=a(236),ae=a(230),ne=a(226),ce=a(227),re=a(40),oe=a(13),ie=a(43),se={PaperProps:{style:{maxHeight:224,width:250}}},le={name:"",mobile:"",stateId:null,districtID:null,password:"",confirmPassword:""};var de=function(){var e=Object(n.useState)(le),t=Object(s.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)(!1),o=Object(s.a)(r,2),i=(o[0],o[1],Object(n.useState)(!1)),l=Object(s.a)(i,2),d=(l[0],l[1]),u=Object(n.useState)(null),j=Object(s.a)(u,2),b=(j[0],j[1],Object(n.useState)([])),p=Object(s.a)(b,2),h=p[0],m=p[1],O=Object(n.useState)([]),v=Object(s.a)(O,2),I=v[0],y=v[1],k=Object(n.useState)(!1),C=Object(s.a)(k,2),P=C[0],T=C[1];Object(n.useEffect)((function(){re.a.get("https://iplfarmersamvad.com/CMSWSIPL/ws/stateList/json").then((function(e){var t;m(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.StateList)})).catch((function(e){return console.log(e)})),a.stateId&&re.a.get("https://iplfarmersamvad.com/CMSWSIPL/ws/districtList/json/".concat(a.stateId)).then((function(e){var t;y(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.districtList)})).catch((function(e){return console.log("Something Went wrong!!!",e)}))}),[a.stateId]);var L=function(e){var t=e.target,n=t.name,r=t.value;c(Object(w.a)(Object(w.a)({},a),{},Object(X.a)({},n,r)))};return console.log("value",a),Object(S.jsxs)(S.Fragment,{children:[P&&Object(S.jsx)(oe.a,{to:"/group-video-calling-app/login",replace:!0}),Object(S.jsx)(Y.a,{maxWidth:"xs",children:Object(S.jsx)(f.a,{pt:8,children:Object(S.jsxs)(f.a,{className:"",component:Z.a,p:2,children:[Object(S.jsx)(f.a,{pb:2,children:Object(S.jsx)(x.a,{component:"h1",variant:"h5",children:"Sign Up"})}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),re.a.post("https://iplfarmersamvad.com/CMSWSIPL/ws/volunteer/json/volunteerSave",a).then((function(e){"mobile_exist"===e.data.msg?d(!0):d(!1),"mobile_exist"===e.data.msg&&alert("Mobile Number already exits"),"success"===e.data.msg&&alert("Registered Successfully"),"success"===e.data.msg&&T(!0)&&c({name:"",mobile:"",stateId:null,districtID:null,password:"",confirmPassword:""})})).catch((function(e){console.error("There was an error!",e)}))},children:[Object(S.jsx)($.a,{variant:"outlined",placeholder:"Full Name",margin:"dense",required:!0,fullWidth:!0,name:"name",label:"Full Name",id:"name",autoComplete:"current-password",value:a.name,onChange:L}),Object(S.jsx)($.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,name:"mobile",placeholder:"888 999 2128",label:"Mobile",type:"number",id:"mobile",value:a.mobile,onChange:L}),Object(S.jsxs)(ee.a,{variant:"outlined",margin:"dense",fullWidth:!0,children:[Object(S.jsx)(te.a,{id:"select__state",children:"State(Optional)"}),Object(S.jsx)(ae.a,{labelId:"stateList",id:"stateList_id",value:a.stateId,name:"stateId",onChange:L,label:"State(Optional)",MenuProps:se,children:h.map((function(e){return Object(S.jsxs)(ne.a,{value:e.stateID,children:[e.stateName," "]},e.stateID)}))})]}),Object(S.jsxs)(ee.a,{variant:"outlined",margin:"dense",fullWidth:!0,children:[Object(S.jsx)(te.a,{id:"select__state",children:"District(optional)"}),Object(S.jsx)(ae.a,{labelId:"District(optional)",id:"District(optional)",value:a.districtID,name:"districtID",onChange:L,label:"District(optional)",MenuProps:se,children:I.map((function(e){return Object(S.jsx)(ne.a,{value:e.districtID,children:e.districtName},e.districtID)}))})]}),Object(S.jsx)($.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,name:"password",label:"Password",placeholder:"*********",id:"password",value:a.password,type:"password",onChange:L}),Object(S.jsx)($.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",placeholder:"*********",id:"confirmPassword",type:"password",value:a.confirmPassword,onChange:L}),Object(S.jsx)(ce.a,{fullWidth:!0,disabled:0===a.name.length||a.mobile.length<10||0===a.password.length||0===a.confirmPassword.length,style:{marginTop:"24px",textTransform:"capitalize"},variant:"contained",color:"primary",type:"submit",children:"SignUp"}),Object(S.jsx)(f.a,{pt:1,children:Object(S.jsxs)(x.a,{children:["Already have an account ?"," ",Object(S.jsx)("span",{children:Object(S.jsx)(ie.b,{to:"/group-video-calling-app/login",children:"Login"})})]})}),Object(S.jsx)(g.a,{container:!0,children:Object(S.jsx)(g.a,{item:!0,xs:!0})})]})]})})})]})};function ue(e){var t=e.fullName,a=e.setInCall,c=Object(n.useState)([]),r=Object(s.a)(c,2),o=r[0],l=r[1],j=Object(n.useState)(!1),b=Object(s.a)(j,2),p=b[0],x=b[1],w=Object(n.useState)(""),y=Object(s.a)(w,2),k=y[0],C=y[1],P=O(),T=v(),L=T.ready,N=T.tracks;return Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P.on("user-published",function(){var e=Object(u.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.subscribe(t,a);case 2:"video"===a&&l((function(e){return[].concat(Object(i.a)(e),[t])})),"audio"===a&&t.audioTrack.play();case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),P.on("user-unpublished",(function(e,t){"audio"===t&&e.audioTrack&&e.audioTrack.stop(),"video"===t&&l((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),P.on("user-left",(function(e){l((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),e.prev=3,e.next=6,P.join(m.appId,t,m.token,0);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("error");case 11:if(!N){e.next=14;break}return e.next=14,P.publish([N[0],N[1]]);case 14:x(!0);case 15:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,a){return e.apply(this,arguments)}}();if(L&&N)try{e(h,t)}catch(a){console.log(a)}C(localStorage.getItem("name"))}),[h,P,L,N]),console.log("users",o),Object(S.jsx)(f.a,{style:{height:"100vh",background:"#0000"},children:Object(S.jsxs)(g.a,{container:!0,direction:"column",style:{height:"100vh",background:"#0000",padding:"16px"},children:[Object(S.jsx)(g.a,{item:!0,style:{height:"83vh",overflow:"hide"},children:p&&N&&Object(S.jsx)(I,{tracks:N,users:o,fullName:t,userName:k})}),Object(S.jsx)(g.a,{item:!0,style:{height:"10%"},children:L&&N&&Object(S.jsx)(Q,{tracks:N,setStart:x,setInCall:a,users:o})})]})})}var je=re.a.create({baseURL:"https://iplfarmersamvad.com/CMSWSIPL/ws"}),be={mobile:"",password:""};var pe=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(be),r=Object(s.a)(c,2),o=r[0],i=r[1],l=Object(n.useState)(),j=Object(s.a)(l,2),b=(j[0],j[1],Object(n.useState)("")),p=Object(s.a)(b,2),h=(p[0],p[1],Object(n.useState)("")),m=Object(s.a)(h,2),O=m[0],v=m[1];Object(n.useEffect)((function(){localStorage.getItem("isLogin")&&oe.a}),[]);var g=function(e){var t=e.target,a=t.name,n=t.value;i(Object(w.a)(Object(w.a)({},o),{},Object(X.a)({},a,n)))};console.log("value",o);var I=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.get("/userProfile/json/".concat(localStorage.getItem("response_userId"),"/false")).then((function(e){var t;console.log(" getUserProfile response",localStorage.setItem("name",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.workerProfile[0].name))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,je.post("/userAuth/agoratoken",{userId:localStorage.getItem("response_userId"),channelName:"",eventId:12}).then((function(e){var t,a,n,c,r;localStorage.setItem("agoraToken",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.agoraToken),localStorage.setItem("appId",null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.appId),localStorage.setItem("channelName",null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.channelName),localStorage.setItem(" eventId",null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.eventId),localStorage.setItem("role",null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.role),console.log("getUserDetails",e.data)}));case 2:a(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){}),[localStorage.getItem("isLogin"),localStorage.getItem("agoraToken")],[O]),Object(S.jsxs)(S.Fragment,{children:[O&&Object(S.jsx)(oe.a,{to:"/group-video-calling-app",replace:!0}),Object(S.jsx)(Y.a,{maxWidth:"xs",children:Object(S.jsx)(f.a,{pt:8,children:Object(S.jsxs)(f.a,{className:"",component:Z.a,p:2,children:[Object(S.jsx)(f.a,{pb:2,children:Object(S.jsx)(x.a,{component:"h1",variant:"h5",children:"Login"})}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),re.a.get("https://iplfarmersamvad.com/CMSWSIPL/ws/userAuth/json/".concat(o.mobile,"/").concat(o.password)).then((function(e){var t,a,n;!0===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.valid)?(localStorage.setItem("isLogin",!0),v(!0),localStorage.setItem("response_userId",null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.response_userId)):!1===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.valid)&&alert("Invalid credentails!!")})).catch((function(e){console.error("There was an error!",e)})),y(),setTimeout((function(){I()}),3e3),a(!0),i({mobile:"",password:""})},children:[Object(S.jsx)($.a,{variant:"outlined",margin:"dense",placeholder:"888 999 6612",required:!0,fullWidth:!0,name:"mobile",label:"Mobile",type:"number",id:"mobile",value:o.mobile,onChange:g}),Object(S.jsx)($.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,placeholder:"*******",name:"password",label:"Password",id:"password",value:o.password,type:"password",onChange:g}),Object(S.jsx)(ce.a,{fullWidth:!0,disabled:o.mobile.length<10||0===o.password.length,style:{marginTop:"24px",textTransform:"capitalize"},variant:"contained",color:"primary",type:"submit",children:"Login"}),Object(S.jsx)(f.a,{pt:1,children:Object(S.jsxs)(x.a,{children:["Don't have an account ?"," ",Object(S.jsx)("span",{children:Object(S.jsx)(ie.b,{to:"/group-video-calling-app/signup",children:"Sign Up"})})]})})]})]})})})]})},he={mobile:"",password:""};var me=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(he),r=Object(s.a)(c,2),o=r[0];return r[1],Object(n.useEffect)((function(){localStorage.getItem("isLogin")&&oe.a}),[]),console.log("value",o),Object(S.jsx)(Y.a,{maxWidth:"xs",children:Object(S.jsx)(f.a,{pt:8,children:Object(S.jsxs)(f.a,{className:"",component:Z.a,p:2,children:[Object(S.jsx)(f.a,{pb:2,children:Object(S.jsx)(x.a,{component:"h1",variant:"h5",children:"Thank you for joining!!!"})}),Object(S.jsx)(ce.a,{component:ie.b,to:"/group-video-calling-app",fullWidth:!0,style:{marginTop:"24px",textTransform:"capitalize"},variant:"contained",color:"primary",onClick:function(){a(!0)},children:"Joining Again"})]})})})},Oe=a(79),ve=a(129),fe=Object(ve.a)({apiKey:"AIzaSyA0kfy4FNpQOFPRPrr0T2Le2PjfCrKXhcY",authDomain:"agora-vc.firebaseapp.com",databaseURL:"https://agora-vc-default-rtdb.firebaseio.com",projectId:"agora-vc",storageBucket:"agora-vc.appspot.com",messagingSenderId:"334486991109",appId:"1:334486991109:web:fe5c9768d9c3f77c13876c",measurementId:"G-6KB45TWME2"}),ge=Object(Oe.a)(fe);var xe=function(){var e=Object(n.useState)(!0),t=Object(s.a)(e,2),a=(t[0],t[1]),c=Object(n.useState)(""),r=Object(s.a)(c,2),o=r[0],l=(r[1],Object(n.useState)(!1)),d=Object(s.a)(l,2),u=d[0],j=(d[1],Object(n.useState)([])),b=Object(s.a)(j,2),p=b[0],h=b[1];return Object(n.useEffect)((function(){var e=Object(Oe.c)(ge,"events");return console.log("query=============================",e),Object(Oe.b)(e,(function(e){var t=e.val();e.exists()&&Object.values(t).map((function(e){h((function(e){return[].concat(Object(i.a)(p),[e])}))}))}))}),[u]),console.log("eventList=========================",p),Object(S.jsx)(ie.a,{children:Object(S.jsxs)(oe.d,{children:[Object(S.jsx)(oe.b,{path:"/group-video-calling-app",element:Object(S.jsx)(ue,{setInCall:a,fullName:o})}),Object(S.jsx)(oe.b,{path:"/group-video-calling-app/signup",element:Object(S.jsx)(de,{})}),Object(S.jsx)(oe.b,{path:"/group-video-calling-app/login",element:Object(S.jsx)(pe,{})}),Object(S.jsx)(oe.b,{path:"/group-video-calling-app/welcome",element:Object(S.jsx)(me,{})})]})})};o.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(xe,{})}),document.getElementById("root"))}},[[180,1,2]]]);
//# sourceMappingURL=main.7dee7c5c.chunk.js.map