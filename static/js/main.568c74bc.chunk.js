(this["webpackJsonpgroup-video-calling-app"]=this["webpackJsonpgroup-video-calling-app"]||[]).push([[0],{150:function(e,t,a){},183:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(25),o=a.n(c),i=(a(150),a(26)),s=a(12),l=a(10),d=a.n(l),u=a(17),j=a(59),b=localStorage.getItem("appId"),p=localStorage.getItem("agoraToken"),h=localStorage.getItem("channelName"),m={mode:"rtc",codec:"vp8",appId:b,token:p},O=Object(j.createClient)(m),v=Object(j.createMicrophoneAndCameraTracks)(),g=a(232),f=a(215),x=a(98),S=a(3);function I(e){var t=e.users,a=e.tracks,r=(e.fullName,e.userName),c=Object(n.useState)(12),o=Object(s.a)(c,2),i=o[0],l=o[1];Object(n.useEffect)((function(){l(Math.max(Math.floor(12/(t.length+1)))),console.log("gridSpacing",i)}),[t,a]);var d=(null===t||void 0===t?void 0:t.length)+1;return Object(S.jsxs)(f.a,{container:!0,style:{height:"100%"},spacing:1,children:[Object(S.jsx)(f.a,{item:!0,className:"admin__video__container",sm:1===d?12:2===d?6:3===d?4:4===d?6:d>4?3:null,xs:1===d?12:2===d||3===d||4===d||d>4?6:null,children:Object(S.jsx)(j.AgoraVideoPlayer,{videoTrack:a[1],style:{height:"100%",width:"100%",background:"#454545",borderRadius:"12px",maxHeight:"".concat(d," <= 2 ? 100%: 280px"),position:"relative"},children:Object(S.jsx)(g.a,{style:{position:"absolute",bottom:"1%",left:"2%",zIndex:1,background:"#fafafa",padding:"2px 4px",borderRadius:"4px"},children:Object(S.jsxs)(x.a,{variant:"body2",children:[" ",r," "]})})})}),t.length>0&&t.map((function(e){return e.videoTrack?Object(S.jsx)(f.a,{item:!0,className:"admin__video__container2",sm:1===d?12:2===d?6:3===d?4:4===d?6:d>4?3:null,xs:1===d?12:2===d||3===d||4===d||d>4?6:null,style:{minHeight:"230px",borderRadius:"16px"},children:Object(S.jsx)(j.AgoraVideoPlayer,{videoTrack:e.videoTrack,style:{position:"relative",height:"100%",width:"100%",borderRadius:"12px",background:"#f2f4f6",maxHeight:"".concat(d," <= 2 ? 100%: 280px")},children:Object(S.jsx)(g.a,{style:{position:"absolute",bottom:"1%",left:"2%",zIndex:1,background:"#fafafa",padding:"2px 4px",borderRadius:"4px"},children:Object(S.jsxs)(x.a,{variant:"body2",children:[e.uid," "]})})},e.uid)}):null}))]})}var k=a(29),w=a(236),y=a(223),T=a(224),C=a(121),P=a.n(C),L=a(122),N=a.n(L),W=a(123),_=a.n(W),D=a(124),M=a.n(D),E=a(128),R=a.n(E),A=a(127),U=a.n(A),V=a(235),q=a(220),F=a(186),z=a(221);var H=function(e){var t=e.open,a=e.setOpen,n=(e.handleClose,e.users);return Object(S.jsx)("div",{children:Object(S.jsx)(V.a,{onClose:function(){a(!1)},open:t,style:{position:"absolute",bottom:"20px"},children:Object(S.jsx)(q.a,{children:n.map((function(e){return Object(S.jsx)(F.a,{children:Object(S.jsxs)(z.a,{children:[e.uid," "]})},e.uid)}))})})})},B=a(125),G=a.n(B),K=a(126),J=a.n(K),Y=a(30),Q=a.n(Y),X=!1;function Z(e){var t=O(),a=e.tracks,r=e.setStart,c=e.setInCall,o=e.users,i=Object(n.useState)({video:!0,audio:!0}),l=Object(s.a)(i,2),j=l[0],b=l[1],p=Object(n.useState)(!1),h=Object(s.a)(p,2),m=h[0],v=h[1],x=Object(n.useState)(!1),I=Object(s.a)(x,2),C=I[0],L=I[1],W=function(){var e=Object(u.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("audio"!==t){e.next=6;break}return e.next=3,a[0].setEnabled(!j.audio);case 3:b((function(e){return Object(k.a)(Object(k.a)({},e),{},{audio:!e.audio})})),e.next=10;break;case 6:if("video"!==t){e.next=10;break}return e.next=9,a[1].setEnabled(!j.video);case 9:b((function(e){return Object(k.a)(Object(k.a)({},e),{},{video:!e.video})}));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.leave();case 2:t.removeAllListeners(),a[0].close(),a[1].close(),r(!1),c(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(d.a.mark((function e(){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0,n={},0!=X){e.next=21;break}return e.next=5,Q.a.createScreenVideoTrack(Y.ScreenVideoTrackInitConfig,0);case 5:return n.screenTrack=e.sent,e.next=8,Q.a.createScreenVideoTrack();case 8:return n=e.sent,console.log("channelParameters",n.screenTrack),console.log(" channelParameters-----------------------------",n),L(!0),e.next=14,t.unpublish(n.localVideoTrack);case 14:return e.next=16,t.publish(n.screenTrack);case 16:n.screenTrack.play(a),X=!0,console.log("isSharingEnabled",X),e.next=28;break;case 21:return n.screenTrack.stop(),e.next=24,t.unpublish(n.screenTrack);case 24:return e.next=26,t.publish(n.localVideoTrack);case 26:n.localVideoTrack.play(a),X=!1;case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(S.jsxs)(g.a,{style:{background:"#f2f4f6",borderRadius:"8px"},p:2,justifyContent:"center",children:[Object(S.jsxs)(f.a,{container:!0,spacing:2,alignItems:"center",children:[Object(S.jsx)(g.a,{flexGrow:.5}),Object(S.jsx)(f.a,{item:!0,children:Object(S.jsx)(w.a,{title:j.audio?"Mute":"Unmute",children:Object(S.jsx)(y.a,{variant:"contained",color:j.audio?"primary":"secondary",onClick:function(){return W("audio")},children:j.audio?Object(S.jsx)(P.a,{}):Object(S.jsx)(N.a,{})})})}),Object(S.jsx)(f.a,{item:!0,children:Object(S.jsx)(w.a,{title:j.video?"Hide":"Show",children:Object(S.jsx)(y.a,{variant:"contained",color:j.video?"primary":"secondary",onClick:function(){return W("video")},children:j.video?Object(S.jsx)(_.a,{}):Object(S.jsx)(M.a,{})})})}),Object(S.jsx)(f.a,{item:!0,children:Object(S.jsx)(w.a,{title:j.video?"Screen Share":"Stop share",children:Object(S.jsx)(y.a,{variant:"contained",color:C?"secondary":"primary",onClick:E,children:C?Object(S.jsx)(G.a,{}):Object(S.jsx)(J.a,{})})})}),Object(S.jsx)(f.a,{item:!0,children:Object(S.jsx)(y.a,{variant:"outlined",color:"secondary",onClick:function(){D(),window.location.href="/group-video-calling-app/welcome"},children:Object(S.jsx)(U.a,{})})}),Object(S.jsx)(g.a,{pl:3}),Object(S.jsx)(f.a,{item:!0,children:Object(S.jsx)(y.a,{onClick:function(){return v(!0)},children:Object(S.jsx)(T.a,{badgeContent:(null===o||void 0===o?void 0:o.length)+1,children:Object(S.jsx)(R.a,{})})})}),Object(S.jsx)(g.a,{flexGrow:.3})]}),Object(S.jsx)(H,{onClose:function(){return v(!0)},open:m,setOpen:v,users:o})]})}var $=a(11),ee=a(225),te=a(218),ae=a(237),ne=a(228),re=a(239),ce=a(233),oe=a(229),ie=a(230),se=a(41),le=a(13),de=a(37),ue={PaperProps:{style:{maxHeight:224,width:250}}},je={name:"",mobile:"",stateId:null,districtID:null,password:"",confirmPassword:""};var be=function(){var e=Object(n.useState)(je),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)(!1),o=Object(s.a)(c,2),i=(o[0],o[1],Object(n.useState)(!1)),l=Object(s.a)(i,2),d=(l[0],l[1]),u=Object(n.useState)(null),j=Object(s.a)(u,2),b=(j[0],j[1],Object(n.useState)([])),p=Object(s.a)(b,2),h=p[0],m=p[1],O=Object(n.useState)([]),v=Object(s.a)(O,2),I=v[0],w=v[1],y=Object(n.useState)(!1),T=Object(s.a)(y,2),C=T[0],P=T[1];Object(n.useEffect)((function(){se.a.get("https://iplfarmersamvad.com/CMSWSIPL/ws/stateList/json").then((function(e){var t;m(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.StateList)})).catch((function(e){return console.log(e)})),a.stateId&&se.a.get("https://iplfarmersamvad.com/CMSWSIPL/ws/districtList/json/".concat(a.stateId)).then((function(e){var t;w(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.districtList)})).catch((function(e){return console.log("Something Went wrong!!!",e)}))}),[a.stateId]);var L=function(e){var t=e.target,n=t.name,c=t.value;r(Object(k.a)(Object(k.a)({},a),{},Object($.a)({},n,c)))};return console.log("value",a),Object(S.jsxs)(S.Fragment,{children:[C&&Object(S.jsx)(le.a,{to:"/group-video-calling-app/login",replace:!0}),Object(S.jsx)(ee.a,{maxWidth:"xs",children:Object(S.jsx)(g.a,{pt:8,children:Object(S.jsxs)(g.a,{className:"",component:te.a,p:2,children:[Object(S.jsx)(g.a,{pb:2,children:Object(S.jsx)(x.a,{component:"h1",variant:"h5",children:"Sign Up"})}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),se.a.post("https://iplfarmersamvad.com/CMSWSIPL/ws/volunteer/json/volunteerSave",a).then((function(e){"mobile_exist"===e.data.msg?d(!0):d(!1),"mobile_exist"===e.data.msg&&alert("Mobile Number already exits"),"success"===e.data.msg&&alert("Registered Successfully"),"success"===e.data.msg&&P(!0)&&r({name:"",mobile:"",stateId:null,districtID:null,password:"",confirmPassword:""})})).catch((function(e){console.error("There was an error!",e)}))},children:[Object(S.jsx)(ae.a,{variant:"outlined",placeholder:"Full Name",margin:"dense",required:!0,fullWidth:!0,name:"name",label:"Full Name",id:"name",autoComplete:"current-password",value:a.name,onChange:L}),Object(S.jsx)(ae.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,name:"mobile",placeholder:"888 999 2128",label:"Mobile",type:"number",id:"mobile",value:a.mobile,onChange:L}),Object(S.jsxs)(ne.a,{variant:"outlined",margin:"dense",fullWidth:!0,children:[Object(S.jsx)(re.a,{id:"select__state",children:"State(Optional)"}),Object(S.jsx)(ce.a,{labelId:"stateList",id:"stateList_id",value:a.stateId,name:"stateId",onChange:L,label:"State(Optional)",MenuProps:ue,children:h.map((function(e){return Object(S.jsxs)(oe.a,{value:e.stateID,children:[e.stateName," "]},e.stateID)}))})]}),Object(S.jsxs)(ne.a,{variant:"outlined",margin:"dense",fullWidth:!0,children:[Object(S.jsx)(re.a,{id:"select__state",children:"District(optional)"}),Object(S.jsx)(ce.a,{labelId:"District(optional)",id:"District(optional)",value:a.districtID,name:"districtID",onChange:L,label:"District(optional)",MenuProps:ue,children:I.map((function(e){return Object(S.jsx)(oe.a,{value:e.districtID,children:e.districtName},e.districtID)}))})]}),Object(S.jsx)(ae.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,name:"password",label:"Password",placeholder:"*********",id:"password",value:a.password,type:"password",onChange:L}),Object(S.jsx)(ae.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",placeholder:"*********",id:"confirmPassword",type:"password",value:a.confirmPassword,onChange:L}),Object(S.jsx)(ie.a,{fullWidth:!0,disabled:0===a.name.length||a.mobile.length<10||0===a.password.length||0===a.confirmPassword.length,style:{marginTop:"24px",textTransform:"capitalize"},variant:"contained",color:"primary",type:"submit",children:"SignUp"}),Object(S.jsx)(g.a,{pt:1,children:Object(S.jsxs)(x.a,{children:["Already have an account ?"," ",Object(S.jsx)("span",{children:Object(S.jsx)(de.b,{to:"/group-video-calling-app/login",children:"Login"})})]})}),Object(S.jsx)(f.a,{container:!0,children:Object(S.jsx)(f.a,{item:!0,xs:!0})})]})]})})})]})};function pe(e){var t=e.fullName,a=(e.isLogin,e.setInCall),r=Object(n.useState)([]),c=Object(s.a)(r,2),o=c[0],l=c[1],j=Object(n.useState)(!1),b=Object(s.a)(j,2),p=b[0],x=b[1],k=Object(n.useState)(""),w=Object(s.a)(k,2),y=w[0],T=w[1],C=O(),P=v(),L=P.ready,N=P.tracks;return Object(n.useEffect)((function(){var e=function(){var e=Object(u.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return localStorage.getItem("isLogin")&&C.on("user-published",function(){var e=Object(u.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.subscribe(t,a);case 2:"video"===a&&l((function(e){return[].concat(Object(i.a)(e),[t])})),"audio"===a&&t.audioTrack.play();case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()),C.on("user-unpublished",(function(e,t){"audio"===t&&e.audioTrack&&e.audioTrack.stop(),"video"===t&&l((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),C.on("user-left",(function(e){l((function(t){return t.filter((function(t){return t.uid!==e.uid}))}))})),e.prev=3,e.next=6,C.join(m.appId,t,m.token,0);case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("error");case 11:if(!N){e.next=14;break}return e.next=14,C.publish([N[0],N[1]]);case 14:x(!0);case 15:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,a){return e.apply(this,arguments)}}();if(L&&N)try{e(h,t)}catch(a){console.log(a)}T(localStorage.getItem("name"))}),[h,C,L,N]),Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(g.a,{style:{height:"100vh",background:"#0000"},children:Object(S.jsxs)(f.a,{container:!0,direction:"column",style:{height:"100vh",background:"#0000",padding:"16px"},children:[Object(S.jsx)(f.a,{item:!0,style:{height:"83vh",overflow:"hide"},children:p&&N&&Object(S.jsx)(I,{tracks:N,users:o,fullName:t,userName:y})}),Object(S.jsx)(f.a,{item:!0,style:{height:"10%"},children:L&&N&&Object(S.jsx)(Z,{tracks:N,setStart:x,setInCall:a,users:o})})]})})})}var he=se.a.create({baseURL:"https://iplfarmersamvad.com/CMSWSIPL/ws"}),me={mobile:"",password:""};var Oe=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=(t[0],t[1]),r=Object(n.useState)(me),c=Object(s.a)(r,2),o=c[0],i=c[1],l=Object(n.useState)(),j=Object(s.a)(l,2),b=(j[0],j[1],Object(n.useState)("")),p=Object(s.a)(b,2),h=(p[0],p[1],Object(n.useState)("")),m=Object(s.a)(h,2),O=m[0],v=m[1];Object(n.useEffect)((function(){localStorage.getItem("isLogin")&&le.a}),[localStorage.getItem("isLogin")]);var f=function(e){var t=e.target,a=t.name,n=t.value;i(Object(k.a)(Object(k.a)({},o),{},Object($.a)({},a,n)))},I=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.get("/userProfile/json/".concat(localStorage.getItem("response_userId"),"/false")).then((function(e){var t;console.log(" getUserProfile response",localStorage.setItem("name",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.workerProfile[0].name))}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he.post("/userAuth/agoratoken",{userId:localStorage.getItem("response_userId"),channelName:"",eventId:12}).then((function(e){var t,a,n,r,c;localStorage.setItem("agoraToken",null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.agoraToken),localStorage.setItem("appId",null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.appId),localStorage.setItem("channelName",null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.channelName),localStorage.setItem(" eventId",null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.eventId),localStorage.setItem("role",null===e||void 0===e||null===(c=e.data)||void 0===c?void 0:c.role),console.log("getUserDetails",e.data)}));case 2:a(!0);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){}),[localStorage.getItem("isLogin"),localStorage.getItem("agoraToken")],[O]),Object(S.jsxs)(S.Fragment,{children:[O&&Object(S.jsx)(le.a,{to:"/group-video-calling-app"}),Object(S.jsx)(ee.a,{maxWidth:"xs",children:Object(S.jsx)(g.a,{pt:8,children:Object(S.jsxs)(g.a,{className:"",component:te.a,p:2,children:[Object(S.jsx)(g.a,{pb:2,children:Object(S.jsx)(x.a,{component:"h1",variant:"h5",children:"Login"})}),Object(S.jsxs)("form",{onSubmit:function(e){e.preventDefault(),se.a.get("https://iplfarmersamvad.com/CMSWSIPL/ws/userAuth/json/".concat(o.mobile,"/").concat(o.password)).then((function(e){var t,a,n;!0===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.valid)?(localStorage.setItem("isLogin",!0),v(!0),localStorage.setItem("response_userId",null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.response_userId)):!1===(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.valid)&&alert("Invalid credentails!!")})).catch((function(e){console.error("There was an error!",e)})),w(),setTimeout((function(){I()}),3e3),localStorage.getItem("isLogin")&&a(!0),i({mobile:"",password:""})},children:[Object(S.jsx)(ae.a,{variant:"outlined",margin:"dense",placeholder:"888 999 6612",required:!0,fullWidth:!0,name:"mobile",label:"Mobile",type:"number",id:"mobile",value:o.mobile,onChange:f}),Object(S.jsx)(ae.a,{variant:"outlined",margin:"dense",required:!0,fullWidth:!0,placeholder:"*******",name:"password",label:"Password",id:"password",value:o.password,type:"password",onChange:f}),Object(S.jsx)(ie.a,{fullWidth:!0,disabled:o.mobile.length<10||0===o.password.length,style:{marginTop:"24px",textTransform:"capitalize"},variant:"contained",color:"primary",type:"submit",children:"Login"}),Object(S.jsx)(g.a,{pt:1,children:Object(S.jsxs)(x.a,{children:["Don't have an account ?"," ",Object(S.jsx)("span",{children:Object(S.jsx)(de.b,{to:"/group-video-calling-app/signup",children:"Sign Up"})})]})})]})]})})})]})},ve={mobile:"",password:""};var ge=function(){var e=Object(n.useState)(!1),t=Object(s.a)(e,2),a=(t[0],t[1]),r=Object(n.useState)(ve),c=Object(s.a)(r,2),o=c[0];return c[1],Object(n.useEffect)((function(){localStorage.getItem("isLogin")&&le.a}),[]),console.log("value",o),Object(S.jsx)(ee.a,{maxWidth:"xs",children:Object(S.jsx)(g.a,{pt:8,children:Object(S.jsxs)(g.a,{className:"",component:te.a,p:2,children:[Object(S.jsx)(g.a,{pb:2,children:Object(S.jsx)(x.a,{component:"h1",variant:"h5",children:"You're left the meeting!!!"})}),Object(S.jsx)(ie.a,{component:de.b,to:"/group-video-calling-app",fullWidth:!0,style:{marginTop:"24px",textTransform:"capitalize"},variant:"contained",color:"primary",onClick:function(){a(!0)},children:"Rejoin"})]})})})},fe=a(79),xe=a(132),Se=Object(xe.a)({apiKey:"AIzaSyA0kfy4FNpQOFPRPrr0T2Le2PjfCrKXhcY",authDomain:"agora-vc.firebaseapp.com",databaseURL:"https://agora-vc-default-rtdb.firebaseio.com",projectId:"agora-vc",storageBucket:"agora-vc.appspot.com",messagingSenderId:"334486991109",appId:"1:334486991109:web:fe5c9768d9c3f77c13876c",measurementId:"G-6KB45TWME2"}),Ie=Object(fe.a)(Se);var ke=function(){var e=Object(n.useState)(!0),t=Object(s.a)(e,2),a=(t[0],t[1]),r=Object(n.useState)(""),c=Object(s.a)(r,2),o=c[0],l=(c[1],Object(n.useState)([])),d=Object(s.a)(l,2),u=d[0],j=d[1];return Object(n.useEffect)((function(){var e=Object(fe.c)(Ie,"events");return console.log("query=============================",e),Object(fe.b)(e,(function(e){var t=e.val();e.exists()&&Object.values(t).map((function(e){j((function(e){return[].concat(Object(i.a)(u),[e])}))}))}))}),[]),Object(S.jsx)(de.a,{children:Object(S.jsxs)(le.d,{children:[Object(S.jsx)(le.b,{path:"/group-video-calling-app/signup",element:Object(S.jsx)(be,{})}),Object(S.jsx)(le.b,{path:"/group-video-calling-app/login",element:Object(S.jsx)(Oe,{})}),Object(S.jsx)(le.b,{path:"/group-video-calling-app/welcome",element:Object(S.jsx)(ge,{})}),Object(S.jsx)(le.b,{path:"/group-video-calling-app",element:Object(S.jsx)(pe,{setInCall:a,fullName:o})})]})})};o.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(ke,{})}),document.getElementById("root"))}},[[183,1,2]]]);
//# sourceMappingURL=main.568c74bc.chunk.js.map